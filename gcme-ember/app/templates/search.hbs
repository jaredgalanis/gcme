
<div class="container">

<h2>Compose query</h2>

<form>
  <div class="form-group">
    <label for="words">Words</label>

    {{#power-select-multiple
      id="words"
      aria-describedby="wordsHelp"
      placeholder="Enter words"
      selected=words
      selectedItemComponent="selected-item-word"
      onchange=(action (mut words))
      search=(action "completeWord")
      searchField="none"
      as |entry|
    }}
      <strong>{{entry._match}}</strong> [{{entry.word}}] - {{entry.definition}}
    {{/power-select-multiple}}

    <small id="wordsHelp" class="form-text text-muted">Match words in a line of text.</small>
  </div>

  <div class="form-group">
    <label for="lemmas">Lemmas</label>

    {{#power-select-multiple
      id="lemmas"
      aria-describedby="lemmasHelp"
      placeholder="Enter lemmas"
      selected=lemmas
      selectedItemComponent="selected-item-lemma"
      onchange=(action (mut lemmas))
      search=(action "completeLemma")
      searchField="none"
      as |entry|
    }}
    <strong>{{entry.tag_lemma}}</strong> - {{entry.definition}}
  {{/power-select-multiple}}

    <small id="lemmasHelp" class="form-text text-muted">Match lemmas of words in a line of text</small>
  </div>

  <div class="form-group">
    <label for="restrict">Restrict to text</label>
    {{#power-select
      id="restrict"
      aria-describedby="restrictHelp"
      options=model.texts
      selected=restrict
      onchange=(action (mut restrict))
      searchField="label"
      placeholder="Select text"
      allowClear=true
      as |entry|
    }}
      {{entry.label}} ({{entry.id}})
    {{/power-select}}
    <small id="restrictHelp" class="form-text text-muted">Only match selected texts.</small>
  </div>

  <div class="form-check form-check-inline">
    {{input class="form-check-input" type="checkbox" id="allWords" checked=requireAllWords}}
    <label class="form-check-label" for="allWords">
      All words must be present in a line.
    </label>
  </div>

  <div class="form-check form-check-inline mb-2">
    {{input class="form-check-input" type="checkbox" id="sort" checked=sortLogical}}
    <label class="form-check-label" for="sort">
      Sort results in logical order, by text and then line number.
    </label>
  </div>

  <div>
    <button {{action "clearSearch"}} type="submit" class="btn btn-primary">Clear</button>
    <button {{action "executeSearch"}} type="submit" class="btn btn-primary">Search</button>
  </div>
</form>

{{#if result}}
  <div class="container mt-2">
    <h2>Results</h2>

    <p>
      Total: {{result.hits.total}}
    </p>

    <table>

  {{#each result.hits.hits as |hit|}}
  <tr>
    <td> {{hit._source.group}}</td>
    <td> {{hit._source.id}}</td>
    <td> {{hit._source.raw_number}}</td>
    <td> {{hit._source.text}}</td>
    <td> {{hit._source.tag_lemma_text}}</td>
  </tr>
  {{/each}}

  </table>
  </div>
{{/if}}

</div>
